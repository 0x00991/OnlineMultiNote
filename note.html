<style>
    * {
        background-color: #1e2124;
        color: white;
    }

    textarea {
        border-style: none;
        border-color: Transparent;
        border: 0;
        outline: none;
        resize: none;
        overflow: auto;

    }
</style>

<script>
    var last_sent = "";
    var last_req_sent = true;

    function save(note_content, autosave) {
        if (autosave == true && last_sent == note_content) { return false; }

        if (last_req_sent == false && autosave == true) {
            return false;
        }

        if (autosave) {
            last_req_sent = false;
        }


        last_sent = note_content;

        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
            if (this.readyState == 4) {
                if (this.status == 200) {
                    document.getElementById("savestatus").innerHTML = "Saved. (" + this.responseText + ")";
                }
                else {
                    document.getElementById("savestatus").innerHTML = "Save Error. (" + this.responseText + ")";
                }

                if (autosave) {
                    last_req_sent = true;
                }
            }
        }
        if (autosave == true) {
            xhttp.open("POST", "/<<--note-->>?pass=<<--pass-->>&autosave=true", true);
        }
        else {
            xhttp.open("POST", "/<<--note-->>?pass=<<--pass-->>", true);
        }

        var data = new FormData();
        data.append("text", note_content);
        document.getElementById("savestatus").innerHTML = "Saving... Don't close tab!";
        xhttp.send(data);
    }

</script>

<body>
    <input type="checkbox" id="check" <<--ischecked-->>>자동저장
    <input type="button" id="btn" value="저장">
    <input type="button" onclick="del()" value="삭제">
    <span id="savestatus">Loaded.</span>
    <br>
    <textarea id="notepad" placeholder="Note"><<--text-->></textarea>

    <script>
        document.getElementById("notepad").style = "font-family: Arial; font-size: 12pt; width: 100%; height:95%;";

        document.getElementById("btn").addEventListener("click", function () { save(document.getElementById("notepad").value, false); });

        setInterval(function () {
            if (document.getElementById("check").checked) {
                save(document.getElementById("notepad").value, true);
            }
        }, 800);

        function del() {
            location.href = "/delete?note=<<--note-->>&pass=<<--pass-->>"
        }
    </script>
</body>